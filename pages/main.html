<head>
  <title>Forum</title>
  <link rel="stylesheet" type="text/css" href="/pages/style/styles.css">
</head>

<body>
  <header>
    <h1>Forum</h1>
    <nav>
      <a href="/pages/login.html" class="login-btn">Login</a>
      <a href="/pages/add-post.html" class="add-post-btn">âž•</a>
    </nav>
  </header>

  <div class="container">

    <div class="form-group">
      <label for="categories">Categories:</label>
      <select id="categories" name="categories" multiple required>
        <!-- Categories will be dynamically populated here -->
      </select>
    </div>
    <div id="posts">
      <!-- Posts will be dynamically generated here -->
    </div>
  </div>
</body>

<script>
<<<<<<< Updated upstream
  getPosts();

  async function getPosts() {
    fetch("/get-posts")
      .then((response) => response.json())
      .then((posts) => {
        console.log(posts);
        posts.forEach(postData => {
          var postLink = document.createElement("a");
          var post = document.createElement("div");
          var postHeader = document.createElement("div");
          var postContent = document.createElement("p");
          var postActions = document.createElement("div");
          var postCategory = document.createElement("span");
          var like = document.createElement("span");
          var comment = document.createElement("span");

          postLink.href = `/pages/post.html?id=${postData.id}`;
          postLink.classList.add("post-link");

          postContent.textContent = `${postData.message}`;

          postData.categories.forEach(cat => {
            postCategory.textContent += `${cat.name} `;
          });

          like.textContent = `â¤ï¸ ${postData.like_count}`;
          comment.textContent = `ðŸ’¬ Comments`;

          post.classList.add("post");
          postHeader.classList.add("post-header");
          postActions.classList.add("post-actions");
          postCategory.classList.add("category");
          like.classList.add("like");
          comment.classList.add("comment");

          postHeader.appendChild(postCategory);
          postHeader.append(` ${postData.title}`);

          postActions.appendChild(like);
          postActions.appendChild(comment);

          post.appendChild(postHeader);
          post.appendChild(postContent);
          post.appendChild(postActions);

          postLink.appendChild(post);
          document.getElementById("posts").appendChild(postLink);
        });
      })
      .catch((error) => {
        console.log(error);
        document.getElementById("posts").append("Error getting posts, please refresh!");
      });
  }
</script>
=======
async function loadCategories() {
  try {
    const response = await fetch('/categories'); // Corrected URL
    if (response.ok) {
      const categories = await response.json();
      const categorySelect = document.getElementById('categories');

      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category.category_id;
        option.textContent = category.name;
        categorySelect.appendChild(option);
      });
    } else {
      console.error('Failed to load categories');
      alert('Failed to load categories. Please refresh the page.');
    }
  } catch (error) {
    console.error('Error loading categories:', error);
    alert('Failed to load categories. Please try again later.');
  }
}

window.onload = loadCategories; // Make sure this is called when the page loads

</script>
>>>>>>> Stashed changes
