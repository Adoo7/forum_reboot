<head>
  <title>{{printf "%s" .Title}}</title>
  <link rel="stylesheet" type="text/css" href="/pages/style/styles.css">
</head>

<body onload="">
  <header>
    <h1>Forum</h1>
    <a href="/pages/login.html" class="login-btn">Login</a>
  </header>
  <div class="container">

    <div class="form-group">
      <label for="categories">Categories:</label>
      <select id="categories" name="categories" multiple required>
        <!-- Categories will be dynamically populated here -->
      </select>
    </div>
    <div class="post">
      <div class="post-header">
        <span class="category">Tech</span>
        Title
      </div>
      <p>Post content goes here...</p>
      <div class="post-actions">
        <span class="like">‚ù§Ô∏è 100</span>
        <span class="comment">üí¨ Comments</span>
      </div>
    </div>
    <div class="post">
      <div class="post-header">
        <span class="category">Sports</span>
        Title
      </div>
      <p>Post content goes here...</p>
      <div class="post-actions">
        <span class="like">‚ù§Ô∏è 50</span>
        <span class="comment">üí¨ Comments</span>
      </div>
    </div>
  </div>
</body>
<script>
async function loadCategories() {
  try {
    const response = await fetch('/categories'); // Corrected URL
    if (response.ok) {
      const categories = await response.json();
      const categorySelect = document.getElementById('categories');

      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category.category_id;
        option.textContent = category.name;
        categorySelect.appendChild(option);
      });
    } else {
      console.error('Failed to load categories');
      alert('Failed to load categories. Please refresh the page.');
    }
  } catch (error) {
    console.error('Error loading categories:', error);
    alert('Failed to load categories. Please try again later.');
  }
}

window.onload = loadCategories; // Make sure this is called when the page loads

</script>
